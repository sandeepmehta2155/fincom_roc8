{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\91704\\\\Desktop\\\\roc8\\\\finvids_roc8\\\\src\\\\Login\\\\auth-context.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport const useAuth = () => {\n  _s();\n\n  return useContext(AuthContext);\n};\n\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\n\nexport function AuthProvider({\n  children\n}) {\n  _s2();\n\n  const navigate = useNavigate();\n  const {\n    login\n  } = JSON.parse(localStorage.getItem(\"login\")) || {\n    login: null\n  };\n  const [isUserLoggedIn, setUserLogin] = useState(login);\n  const [userExists, setUserExists] = useState(false);\n  const [checkPassword, setCheckPassword] = useState(null);\n  const [responseFromDB, setResponseFromDB] = useState(null);\n  const [validUserName, setValidUserName] = useState(\"none\");\n  const [validPassword, setValidPassword] = useState(\"none\");\n  useEffect(() => {\n    responseFromDB === \"req can't be made\" ? setUserExists(\"block\") : setUserExists(\"none\");\n    responseFromDB === \"invalid username\" ? setValidUserName(\"block\") : setValidUserName(\"none\");\n    responseFromDB === \"invalid password\" ? setValidPassword(\"block\") : setValidPassword(\"none\");\n    responseFromDB === \"wrong password\" ? setCheckPassword(\"block\") : setCheckPassword(\"none\");\n\n    if (responseFromDB === \"user auth is successfull\") {\n      setUserLogin(true);\n      localStorage.setItem(\"login\", JSON.stringify({\n        login: true\n      }));\n    }\n  }, [responseFromDB]);\n\n  function LogOut() {\n    setUserLogin(false);\n    setUserExists(\"none\");\n    setCheckPassword(\"none\");\n    localStorage.removeItem(\"historyvideos\");\n    localStorage.removeItem(\"login\");\n    localStorage.removeItem(\"likedvideos\");\n    localStorage.removeItem(\"subscriptions\");\n    localStorage.removeItem(\"username\");\n    localStorage.removeItem(\"watchlatervideos\");\n    localStorage.removeItem(\"playlist\");\n    setTimeout(() => navigate(\"/\"), 900);\n  }\n\n  function LoginUserWithCredentials(username, password) {\n    (async function () {\n      axios.get(`https://videolib.sandeepmehta215.repl.co/userauth/${username}`, {\n        params: {\n          password: password\n        }\n      }).then(resp => {\n        console.log(resp.data.message);\n\n        if (resp.data.message) {\n          setResponseFromDB(resp.data.message);\n\n          if (resp.data.message === \"user auth is successfull\") {\n            setUserLogin(true);\n            localStorage.setItem(\"login\", JSON.stringify({\n              login: true\n            }));\n            localStorage.setItem(\"historyvideos\", JSON.stringify({\n              historyvideos: resp.data.historyvideos\n            }));\n            localStorage.setItem(\"likedvideos\", JSON.stringify({\n              likedvideos: resp.data.likedvideos\n            }));\n            localStorage.setItem(\"subscriptions\", JSON.stringify({\n              subscriptions: resp.data.subscriptions\n            }));\n            localStorage.setItem(\"watchlatervideos\", JSON.stringify({\n              watchlatervideos: resp.data.watchlatervideos\n            }));\n            localStorage.setItem(\"playlist\", JSON.stringify({\n              playlist: resp.data.playlist\n            }));\n            localStorage.setItem(\"username\", JSON.stringify({\n              username: resp.data.username\n            }));\n            setTimeout(() => navigate(\"/\"), 800);\n          }\n        }\n      });\n    })();\n  }\n\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      isUserLoggedIn,\n      LogOut,\n      LoginUserWithCredentials,\n      setCheckPassword,\n      checkPassword,\n      setUserExists,\n      validUserName,\n      validPassword,\n      userExists\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 126,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(AuthProvider, \"UT2SoWBBR/UKPKwi1w+6bXOCWz4=\", false, function () {\n  return [useNavigate];\n});\n\n_c = AuthProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"sources":["C:/Users/91704/Desktop/roc8/finvids_roc8/src/Login/auth-context.js"],"names":["createContext","useContext","useEffect","useState","useNavigate","axios","AuthContext","useAuth","AuthProvider","children","navigate","login","JSON","parse","localStorage","getItem","isUserLoggedIn","setUserLogin","userExists","setUserExists","checkPassword","setCheckPassword","responseFromDB","setResponseFromDB","validUserName","setValidUserName","validPassword","setValidPassword","setItem","stringify","LogOut","removeItem","setTimeout","LoginUserWithCredentials","username","password","get","params","then","resp","console","log","data","message","historyvideos","likedvideos","subscriptions","watchlatervideos","playlist"],"mappings":"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","sourcesContent":["import { createContext, useContext, useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport axios from \"axios\";\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const useAuth = () => {\r\n  return useContext(AuthContext);\r\n};\r\n\r\nexport function AuthProvider({ children }) {\r\n  const navigate = useNavigate();\r\n\r\n  const { login } = JSON.parse(localStorage.getItem(\"login\")) || {\r\n    login: null\r\n  };\r\n\r\n  const [isUserLoggedIn, setUserLogin] = useState(login);\r\n\r\n  const [userExists, setUserExists] = useState(false);\r\n\r\n  const [checkPassword, setCheckPassword] = useState(null);\r\n\r\n  const [responseFromDB, setResponseFromDB] = useState(null);\r\n\r\n  const [validUserName, setValidUserName] = useState(\"none\");\r\n\r\n  const [validPassword, setValidPassword] = useState(\"none\");\r\n\r\n  useEffect(() => {\r\n    responseFromDB === \"req can't be made\"\r\n      ? setUserExists(\"block\")\r\n      : setUserExists(\"none\");\r\n\r\n    responseFromDB === \"invalid username\"\r\n      ? setValidUserName(\"block\")\r\n      : setValidUserName(\"none\");\r\n\r\n    responseFromDB === \"invalid password\"\r\n      ? setValidPassword(\"block\")\r\n      : setValidPassword(\"none\");\r\n\r\n    responseFromDB === \"wrong password\"\r\n      ? setCheckPassword(\"block\")\r\n      : setCheckPassword(\"none\");\r\n\r\n    if (responseFromDB === \"user auth is successfull\") {\r\n      setUserLogin(true);\r\n      localStorage.setItem(\"login\", JSON.stringify({ login: true }));\r\n    }\r\n  }, [responseFromDB]);\r\n\r\n  function LogOut() {\r\n    setUserLogin(false);\r\n    setUserExists(\"none\");\r\n    setCheckPassword(\"none\");\r\n    localStorage.removeItem(\"historyvideos\");\r\n    localStorage.removeItem(\"login\");\r\n    localStorage.removeItem(\"likedvideos\");\r\n    localStorage.removeItem(\"subscriptions\");\r\n    localStorage.removeItem(\"username\");\r\n    localStorage.removeItem(\"watchlatervideos\");\r\n    localStorage.removeItem(\"playlist\");\r\n\r\n    setTimeout(() => navigate(\"/\"), 900);\r\n  }\r\n\r\n  function LoginUserWithCredentials(username, password) {\r\n    (async function () {\r\n      axios\r\n        .get(`https://videolib.sandeepmehta215.repl.co/userauth/${username}`, {\r\n          params: {\r\n            password: password\r\n          }\r\n        })\r\n        .then((resp) => {\r\n          console.log(resp.data.message);\r\n\r\n          if (resp.data.message) {\r\n            setResponseFromDB(resp.data.message);\r\n\r\n            if (resp.data.message === \"user auth is successfull\") {\r\n              setUserLogin(true);\r\n\r\n              localStorage.setItem(\"login\", JSON.stringify({ login: true }));\r\n\r\n              localStorage.setItem(\r\n                \"historyvideos\",\r\n                JSON.stringify({ historyvideos: resp.data.historyvideos })\r\n              );\r\n\r\n              localStorage.setItem(\r\n                \"likedvideos\",\r\n                JSON.stringify({ likedvideos: resp.data.likedvideos })\r\n              );\r\n\r\n              localStorage.setItem(\r\n                \"subscriptions\",\r\n                JSON.stringify({ subscriptions: resp.data.subscriptions })\r\n              );\r\n\r\n              localStorage.setItem(\r\n                \"watchlatervideos\",\r\n                JSON.stringify({ watchlatervideos: resp.data.watchlatervideos })\r\n              );\r\n\r\n              localStorage.setItem(\r\n                \"playlist\",\r\n                JSON.stringify({ playlist: resp.data.playlist })\r\n              );\r\n\r\n              localStorage.setItem(\r\n                \"username\",\r\n                JSON.stringify({ username: resp.data.username })\r\n              );\r\n\r\n              setTimeout(() => navigate(\"/\"), 800);\r\n            }\r\n          }\r\n        });\r\n    })();\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider\r\n      value={{\r\n        isUserLoggedIn,\r\n        LogOut,\r\n        LoginUserWithCredentials,\r\n        setCheckPassword,\r\n        checkPassword,\r\n        setUserExists,\r\n        validUserName,\r\n        validPassword,\r\n        userExists\r\n      }}\r\n    >\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}